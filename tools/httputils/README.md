# HTTP 工具

一个基于 `requests` 封装的增强型 HTTP 请求工具库，核心解决 **响应乱码、JSON 解析异常、HTTP 错误统一处理** 三大痛点，支持 GET/POST/PUT/DELETE 等主流 HTTP 方法，提供编码自动检测与手动指定能力，输出结构化响应结果，简化接口调用与异常排查流程。

## 一、项目介绍

### 1.1 核心功能

- **智能编码处理**：自动检测响应内容编码（优先解析 `Content-Type` 头、其次用 `chardet` 检测，兜底默认 `utf-8`），也支持手动指定编码（如 `gbk`、`gb2312`），彻底解决中文乱码问题。
- **HTTP 方法全覆盖**：支持 GET、POST、PUT、DELETE、PATCH、HEAD、OPTIONS 主流 HTTP 方法，满足各类接口调用场景。
- **统一错误处理**：对 HTTP 错误（如 4xx/5xx）、超时、网络异常等进行分类捕获，返回结构化错误信息（含错误类型、状态码、描述），避免原生异常崩溃。
- **灵活数据格式支持**：自动识别响应 `Content-Type`，JSON 格式优先解析为字典，非 JSON 格式返回文本；请求支持 `json`、`data`、`files` 多种参数类型。
- **结构化响应输出**：成功 / 失败均返回统一格式字典，包含 `success` 状态、`status_code`、`data` 数据、`headers` 响应头、`encoding` 编码等关键信息，便于后续逻辑处理。

### 1.2 适用场景

- 接口自动化测试：需要稳定处理不同编码、不同响应格式的接口返回。
- 爬虫开发：应对目标网站响应编码不规范（如 `gbk` 编码未在 `Content-Type` 声明）导致的乱码问题。
- 后端服务集成：调用第三方接口时，需统一错误捕获与结构化结果处理，减少重复代码。
- 日常接口调试：快速发送 HTTP 请求，自动处理编码与 JSON 解析，提升调试效率。

## 二、环境准备

### 2.1 依赖库

该工具基于 Python 标准库与常用第三方库构建，依赖列表如下：



| 依赖库     | 版本要求         | 用途说明                            |
| ---------- | ---------------- | ----------------------------------- |
| `requests` | ≥ 2.20.0         | 核心 HTTP 请求发送库                |
| `chardet`  | ≥ 4.0.0          | 自动检测响应内容编码                |
| `typing`   | Python 3.5+ 内置 | 类型注解，提升代码可读性与 IDE 支持 |

### 2.2 安装依赖

通过 `pip` 直接安装依赖（若使用 Python 3.5+，`typing` 为内置模块，无需额外安装）：



```bash
pip install requests chardet
```

## 参数说明

### 必需参数

| 参数名   | 类型 | 说明            | 示例                                   |
| :------- | :--- | :-------------- | :------------------------------------- |
| `method` | str  | HTTP 请求方法   | `'GET'`, `'POST'`, `'PUT'`, `'DELETE'` |
| `url`    | str  | 请求的 URL 地址 | `'https://api.example.com/endpoint'`   |

### 可选参数

| 参数名      | 类型   | 默认值 | 说明                                 |                                     |
| :---------- | :----- | :----- | :----------------------------------- | ----------------------------------- |
| `params`    | String | None   | URL 查询参数，数据类型json字符串     | `{"page": 1, "limit": 10}`          |
| `data`      | String | None   | 请求体数据（表单数据）或者josn字符串 | `{"key": "value"}`                  |
| `json_data` | String | None   | JSON 请求体数据，数据类型json字符串  | `{"name": "John"}`                  |
| `headers`   | String | None   | 请求头信息，数据类型json字符串，     | `{"Authorization": "Bearer token"}` |

## 注意事项

- 确保网络连接正常
- 遵守相关使用条款和API限制
- 注意搜索内容的准确性验证

## 支持

如有问题或建议，请通过相关渠道联系技术支持。